# 文件系统备忘
## 软盘空间分配
MBR 主引导，跳转到DBR（汇编），在7C00 1号扇区 off 0  [000~200]
DBR 操作系统引导，将内核载入内存并跳转到内核（0x8000）。在7E00 2号扇区 off 512 [200~400]
(保留扇区) 3号扇区 1024 [400~600]
FAT表1 4-7扇区（4个） 3*512 = 1536 [600~e00]
FAT表2 8-11扇区（4个）512*7 = 3584 [e00~1600]
保留数据块 12-13 512 * 11 = 5632 [1600~1a00]
根目录数据块 14-15 512*13= 6656 [1a00~1e00]
内核程序 16-23 512*15= 7680 [1e00~2e00]
home/ 24 [2e00~3000]
msg 25 [3000~3200]
用户程序q 26-29 512*25=12800 [3200~3a00]
用户程序w 30-33 512*29=14848 [3a00~4200]
用户程序a 34-37 512*33=16896 [4200~4a00]
用户程序s 38-41 512*37=18944 [4a00~5200]
内核程序（接上） 42-57(16) [5200~7200]
终端 58-73(16) [7200~9200]
## 软盘结构
; 磁道 面 扇区
;  0～79     0~1    1~18
1 0 2
逻辑扇区 面 运算后的结果
1~18 0  -1/18-> 0
19~36 1 -1/18-> 1
37~54 0 -1/18-> 2
55~72 1 -1/18-> 3
## 内存结构
//TODO: WARNING:
// 用户程序是通过LD硬编码进去的。
// 在本项目中，还没有内存分配，所以就让四个程序硬编码吧
// 动态内存分配后记得改过来
0: 0x4000：内核栈
4: 0x4200 user program Q
4: 0x4A00 user program W
4: 0x5200 user program A
4: 0x5A00 user program S
1:0x7C00: MBR(loader)
2:0x7E00: DBR
4:0x8200: FAT table
4:0x8A00: root area
8:0x9200: data block
32:0xA200 kernel
16:0xE200 terminal